(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

//var $ = require("jquery");


//import Vue from 'vue';
new Vue({
    el: '#example',
    data: {
        carouselControls: true,
        slideWidth: 500,
        autoplayTimeout: 3000,
        slideHeight: 750,
        slideBorder: 1,
        slideSpace: 420,
        slidePerspective: 10,
        slideScaling: 300,
        animationSpeed: 500,
        startIndex: 0,
        autoplayEnabled: true,
        visible: 7,
        direction: 'rtl',
        infinite: true,
        disable3d: false,
        controlsPrevHtml: '&#10092;',
        controlsNextHtml: '&#10093;',
        controlsWidth: 30,
        controlsHeight: 60,
        slides: [{
            src: 'img/icons/index.jpg'
        }, {
            src: 'img/icons/index_.jpg'
        }, {
            src: 'img/icons/index_Grease.jpg'
        }, {
            src: 'img/icons/index_Lebel.jpg'
        }, {
            src: 'img/icons/index_Jeweler.jpg' //
        }, {
            src: 'img/icons/index.jpg' //
        }, {
            src: 'img/icons/index_charge.jpg'
        }, {
            src: 'img/icons/index_Speed.jpg'
        }, {
            src: 'img/icons/index_Jeweler.jpg'
        }]
    },
    components: {
        'carousel-3d': Carousel3d.Carousel3d,
        'slide': Carousel3d.Slide
    }
});

//$('#unique_design').slickLightbox({
//     src: 'src',
//   itemSelector: 'img'
//});


// hover effect of button in section#examples
$(".btn_look").on("mouseenter", function () {
    $(".inner_capcha").addClass("hover_btn_examples");
});
$(".btn_look").on("mouseleave", function () {
    $(".inner_capcha").removeClass("hover_btn_examples");
});

var clock;

$(document).ready(function () {

    function headerBehaviour1() {
        //behaviour of header by scrolling 
        $.scrollDetection = function (options) {
            var settings = $.extend({
                scrollDown: function scrollDown() {},
                scrollUp: function scrollUp() {}
            }, options);

            var scrollPosition = 0;
            $(window).scroll(function () {
                var cursorPosition = $(this).scrollTop();
                if (cursorPosition > scrollPosition) {
                    settings.scrollDown();
                } else if (cursorPosition < scrollPosition) {
                    settings.scrollUp();
                }
                scrollPosition = cursorPosition;
            });
        };

        var $header = $("header");
        $.scrollDetection({
            scrollDown: function scrollDown() {
                $header.addClass("header_hidden");
            },
            scrollUp: function scrollUp() {
                $header.removeClass("header_hidden");
            }
        });
    }

    headerBehaviour1();

    // behaviour of header by scrolling (second solution)

    function headerBehaviour2() {

        $("header").headroom({
            "offset": 205,
            "tolerance": 15,
            "classes": {
                "initial": "animated",
                "pinned": "swingInX",
                "unpinned": "swingOutX"
            }
        });

        // to destroy
        $("#header").headroom("destroy");
    }

    //headerBehaviour2();


    $('.unique_slider').slick({
        infinite: true,
        centerMode: true,
        centerPadding: '0px',
        slidesToShow: 5,
        slidesToScroll: 1

    });
    $('.unique_slider, .examples_slide').slickLightbox({
        src: 'src',
        itemSelector: '.wrap_img_slider img'
    });
    $('.examples_slide').slick({
        infinite: true,
        centerMode: true,
        centerPadding: '100px',
        slidesToShow: 2,
        slidesToScroll: 1,
        responsive: [{
            breakpoint: 1200,
            settings: {
                centerPadding: '50px'
            }
        }, {
            breakpoint: 900,
            settings: {
                centerPadding: '0'
            }
        }, {
            breakpoint: 520,
            settings: {
                centerPadding: '50px',
                slidesToShow: 1
            }
        }]

    });

    //clock counter

    var clock;

    var date = new Date(2017, 6, 15);
    var now = new Date();
    var diff = date.getTime() / 1000 - now.getTime() / 1000;

    var clock = $('.clock').FlipClock(diff, {
        clockFace: 'DailyCounter',
        countdown: true
    });

    //			clock = $('.clock').FlipClock({
    //		        clockFace: 'DailyCounter',
    //		        autoStart: false,
    //		        callbacks: {
    //		        	stop: function() {
    //		        		$('.message').html('Время акции вышло (')
    //		        	}
    //		        }
    //		    });
    //				    
    //		    clock.setTime(200000);
    //		    clock.setCountdown(true);
    //		    clock.start();

    //WOW init
    new WOW().init();

    // slide and swipe menu init
    $('nav').slideAndSwipe();

    $(".ssm-toggle-nav").on("click", function () {
        $("body").toggleClass("body_OH");
    });

    document.addEventListener("keydown", keyDownTextField, false);

    function keyDownTextField(e) {
        var keyCode = e.keyCode;
        if (keyCode == 27) {}
    }

    //Form VAlidation 

    $("#js_register_form").validate({
        rules: {
            form_name: {
                required: true
            },
            form_email: {
                required: true,
                email: true
            },
            form_phone: {
                required: true,
                minlenhth: 10,
                digits: true
            }
        },
        messages: {
            form_name: {
                required: "Обязательное поле"
            },
            form_email: {
                required: "Обязательное поле",
                email: "Введите корректный Email"
            },
            form_phone: {
                required: "Обязательное поле"
            }
        },
        focusCleanup: true,
        focusInvalid: false
    });
    $("#js_register_form2").validate({
        rules: {
            form_name: {
                required: true
            },
            form_email: {
                required: true,
                email: true
            },
            form_phone: {
                required: true,
                minlenhth: 10,
                digits: true
            }
        },
        messages: {
            form_name: {
                required: "Обязательное поле"
            },
            form_email: {
                required: "Обязательное поле",
                email: "Введите корректный Email"
            },
            form_phone: {
                required: "Обязательное поле"
            }
        },
        focusCleanup: true,
        focusInvalid: false
    });

    //phone input mask
    $("#form_phone").mask("(999) 999-99-99");

    //    $(".button-collapse").sideNav();


    // section#start overlay opacity by scrolling 
    $(window).on("scroll", function () {
        var sstart = $("#start"),
            overlay = $(".overlay"),
            overlayIMG = $(".overlay_img"),
            sheight = sstart.height(),
            winST = $(window).scrollTop();
        overlay.css("opacity", winST / sheight);
        overlayIMG.css("opacity", winST / sheight);
    });

    // random overlay color at section#start
    var arrColors = ["img/bg_start_big_overlay_paren_orangeP.png", "img/bg_start_big_overlay_paren_orange.png", "img/bg_start_big_overlay_paren_darkBlue.png", "img/bg_start_big_overlay_paren_coral.png", "img/bg_start_big_overlay_paren_grey.png"];

    function randomInteger(min, max) {
        var rand = min + Math.random() * (max + 1 - min);
        rand = Math.floor(rand);
        return rand;
    }
    $(".overlay_img").attr("src", arrColors[randomInteger(0, 4)]);

    // hover effect of button in section#start 
    $(".getCons").on("mouseenter", function () {
        $("#start .containerr").addClass("hoverButton");
    });
    $(".getCons").on("mouseleave", function () {
        $("#start .containerr").removeClass("hoverButton");
    });

    // header appearing after start-section is scrolled
    /*if ($(window).scrollTop() + 200 > $("#underStart").offset().top) {
        $("header").css("top", "0");
    }
    $(window).on("scroll", function () {
        if ($("#underStart").offset().top - $(window).scrollTop() - 200 < 0) {
            $("header").css("top", "0");
            $("header nav").css("top", "60px");
            $(" header .ssm-overlay").css("top", "60px");
        } else {
            $("header").css("top", "");
            $("header nav").css("top", "");
            $(" header .ssm-overlay").css("top", "");
        }
    });*/

    // parallax init
    $('.parallax').parallax();

    //add preloader of scrolling
    $("<div id='contPreloader'><div id='scrollPreload'></div></div>").prependTo($("body"));
    $(window).scroll(function () {
        var ratio = $(document).scrollTop() / (($(document).height() - $(window).height()) / 100);
        $("#scrollPreload").width(ratio + "%");
    });

    // change header style by scrolling 
    $(window).on("scroll", function () {
        if ($(this).scrollTop() > 77) {
            $("header .logo").css("margin", "0px");
        } else {
            $("header .logo").css("margin", "");
        }
    });

    // inner anchor-links
    $('a[data-target^="anchor"], [data-target^="anchor"] ').on("click.smoothscroll", function () {
        var target = $(this).attr("href"),
            bl_top = $(target).offset().top - 56;
        $('body, html').animate({
            scrollTop: bl_top
        }, 700);
        return false;
    });

    // buttton UP
    // button arrow to UP

    $("body").append("<button class='btn_up'/>");

    $(window).scroll(function () {
        var windscroll = $(window).scrollTop();
        if ($(window).scrollTop() > 50) {
            $(".btn_up").addClass("activeB");
        } else {
            $(".btn_up").removeClass("activeB");
        }
    });

    $(".btn_up").on("click", function (e) {
        e.preventDefault();
        $(this).removeClass("activeB");
        $("body").animate({
            'scrollTop': 0
        }, 800);
        $("html").animate({
            'scrollTop': 0
        }, 800);
    });

    // heightlite nav links by scrolling
    $(document).scroll(function () {

        navigationAnchors(1);
        navigationAnchors(2);
        navigationAnchors(3);
        navigationAnchors(4);
        navigationAnchors(5);
        navigationAnchors(7);
        navigationAnchors(6);
        navigationAnchors(7);

        function navigationAnchors(n) {
            if ($('[data-pos=\'pos-' + n + '\']').offset().top - $(window).scrollTop() - 300 < 0) {
                if (!$('[data-pos=\'pos-' + n + '\']').next().offset().top - $(window).scrollTop() - 300 < 0) {
                    $('.main-navigation a.link-' + n).parent().siblings().children().removeClass('activeNavLink');
                    //                    console.dir($(`.nav a.link-${n}`).parent().siblings());
                    $('.main-navigation a.link-' + n).addClass('activeNavLink');
                } else {
                    $('.main-navigation a.link-' + n).removeClass('activeNavLink');
                }
            } else {
                $('.main-navigation a.link-' + n).removeClass('activeNavLink');
            }
        }
    });
});
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvanMvY29tbW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG4vL3ZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuXG4vL2ltcG9ydCBWdWUgZnJvbSAndnVlJztcbm5ldyBWdWUoe1xuICAgIGVsOiAnI2V4YW1wbGUnLFxuICAgIGRhdGE6IHtcbiAgICAgICAgY2Fyb3VzZWxDb250cm9sczogdHJ1ZSxcbiAgICAgICAgc2xpZGVXaWR0aDogNTAwLFxuICAgICAgICBhdXRvcGxheVRpbWVvdXQ6IDMwMDAsXG4gICAgICAgIHNsaWRlSGVpZ2h0OiA3NTAsXG4gICAgICAgIHNsaWRlQm9yZGVyOiAxLFxuICAgICAgICBzbGlkZVNwYWNlOiA0MjAsXG4gICAgICAgIHNsaWRlUGVyc3BlY3RpdmU6IDEwLFxuICAgICAgICBzbGlkZVNjYWxpbmc6IDMwMCxcbiAgICAgICAgYW5pbWF0aW9uU3BlZWQ6IDUwMCxcbiAgICAgICAgc3RhcnRJbmRleDogMCxcbiAgICAgICAgYXV0b3BsYXlFbmFibGVkOiB0cnVlLFxuICAgICAgICB2aXNpYmxlOiA3LFxuICAgICAgICBkaXJlY3Rpb246ICdydGwnLFxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgZGlzYWJsZTNkOiBmYWxzZSxcbiAgICAgICAgY29udHJvbHNQcmV2SHRtbDogJyYjMTAwOTI7JyxcbiAgICAgICAgY29udHJvbHNOZXh0SHRtbDogJyYjMTAwOTM7JyxcbiAgICAgICAgY29udHJvbHNXaWR0aDogMzAsXG4gICAgICAgIGNvbnRyb2xzSGVpZ2h0OiA2MCxcbiAgICAgICAgc2xpZGVzOiBbe1xuICAgICAgICAgICAgc3JjOiAnaW1nL2ljb25zL2luZGV4LmpwZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgc3JjOiAnaW1nL2ljb25zL2luZGV4Xy5qcGcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNyYzogJ2ltZy9pY29ucy9pbmRleF9HcmVhc2UuanBnJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzcmM6ICdpbWcvaWNvbnMvaW5kZXhfTGViZWwuanBnJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzcmM6ICdpbWcvaWNvbnMvaW5kZXhfSmV3ZWxlci5qcGcnIC8vXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNyYzogJ2ltZy9pY29ucy9pbmRleC5qcGcnIC8vXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNyYzogJ2ltZy9pY29ucy9pbmRleF9jaGFyZ2UuanBnJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzcmM6ICdpbWcvaWNvbnMvaW5kZXhfU3BlZWQuanBnJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzcmM6ICdpbWcvaWNvbnMvaW5kZXhfSmV3ZWxlci5qcGcnXG4gICAgICAgIH1dXG4gICAgfSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICAgICdjYXJvdXNlbC0zZCc6IENhcm91c2VsM2QuQ2Fyb3VzZWwzZCxcbiAgICAgICAgJ3NsaWRlJzogQ2Fyb3VzZWwzZC5TbGlkZVxuICAgIH1cbn0pO1xuXG4vLyQoJyN1bmlxdWVfZGVzaWduJykuc2xpY2tMaWdodGJveCh7XG4vLyAgICAgc3JjOiAnc3JjJyxcbi8vICAgaXRlbVNlbGVjdG9yOiAnaW1nJ1xuLy99KTtcblxuXG4vLyBob3ZlciBlZmZlY3Qgb2YgYnV0dG9uIGluIHNlY3Rpb24jZXhhbXBsZXNcbiQoXCIuYnRuX2xvb2tcIikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiLmlubmVyX2NhcGNoYVwiKS5hZGRDbGFzcyhcImhvdmVyX2J0bl9leGFtcGxlc1wiKTtcbn0pO1xuJChcIi5idG5fbG9va1wiKS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICQoXCIuaW5uZXJfY2FwY2hhXCIpLnJlbW92ZUNsYXNzKFwiaG92ZXJfYnRuX2V4YW1wbGVzXCIpO1xufSk7XG5cbnZhciBjbG9jaztcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gaGVhZGVyQmVoYXZpb3VyMSgpIHtcbiAgICAgICAgLy9iZWhhdmlvdXIgb2YgaGVhZGVyIGJ5IHNjcm9sbGluZyBcbiAgICAgICAgJC5zY3JvbGxEZXRlY3Rpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe1xuICAgICAgICAgICAgICAgIHNjcm9sbERvd246IGZ1bmN0aW9uIHNjcm9sbERvd24oKSB7fSxcbiAgICAgICAgICAgICAgICBzY3JvbGxVcDogZnVuY3Rpb24gc2Nyb2xsVXAoKSB7fVxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHZhciBzY3JvbGxQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yUG9zaXRpb24gPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJzb3JQb3NpdGlvbiA+IHNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnNjcm9sbERvd24oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnNvclBvc2l0aW9uIDwgc2Nyb2xsUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Muc2Nyb2xsVXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBjdXJzb3JQb3NpdGlvbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciAkaGVhZGVyID0gJChcImhlYWRlclwiKTtcbiAgICAgICAgJC5zY3JvbGxEZXRlY3Rpb24oe1xuICAgICAgICAgICAgc2Nyb2xsRG93bjogZnVuY3Rpb24gc2Nyb2xsRG93bigpIHtcbiAgICAgICAgICAgICAgICAkaGVhZGVyLmFkZENsYXNzKFwiaGVhZGVyX2hpZGRlblwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY3JvbGxVcDogZnVuY3Rpb24gc2Nyb2xsVXAoKSB7XG4gICAgICAgICAgICAgICAgJGhlYWRlci5yZW1vdmVDbGFzcyhcImhlYWRlcl9oaWRkZW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhlYWRlckJlaGF2aW91cjEoKTtcblxuICAgIC8vIGJlaGF2aW91ciBvZiBoZWFkZXIgYnkgc2Nyb2xsaW5nIChzZWNvbmQgc29sdXRpb24pXG5cbiAgICBmdW5jdGlvbiBoZWFkZXJCZWhhdmlvdXIyKCkge1xuXG4gICAgICAgICQoXCJoZWFkZXJcIikuaGVhZHJvb20oe1xuICAgICAgICAgICAgXCJvZmZzZXRcIjogMjA1LFxuICAgICAgICAgICAgXCJ0b2xlcmFuY2VcIjogMTUsXG4gICAgICAgICAgICBcImNsYXNzZXNcIjoge1xuICAgICAgICAgICAgICAgIFwiaW5pdGlhbFwiOiBcImFuaW1hdGVkXCIsXG4gICAgICAgICAgICAgICAgXCJwaW5uZWRcIjogXCJzd2luZ0luWFwiLFxuICAgICAgICAgICAgICAgIFwidW5waW5uZWRcIjogXCJzd2luZ091dFhcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyB0byBkZXN0cm95XG4gICAgICAgICQoXCIjaGVhZGVyXCIpLmhlYWRyb29tKFwiZGVzdHJveVwiKTtcbiAgICB9XG5cbiAgICAvL2hlYWRlckJlaGF2aW91cjIoKTtcblxuXG4gICAgJCgnLnVuaXF1ZV9zbGlkZXInKS5zbGljayh7XG4gICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMHB4JyxcbiAgICAgICAgc2xpZGVzVG9TaG93OiA1LFxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxuXG4gICAgfSk7XG4gICAgJCgnLnVuaXF1ZV9zbGlkZXIsIC5leGFtcGxlc19zbGlkZScpLnNsaWNrTGlnaHRib3goe1xuICAgICAgICBzcmM6ICdzcmMnLFxuICAgICAgICBpdGVtU2VsZWN0b3I6ICcud3JhcF9pbWdfc2xpZGVyIGltZydcbiAgICB9KTtcbiAgICAkKCcuZXhhbXBsZXNfc2xpZGUnKS5zbGljayh7XG4gICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMTAwcHgnLFxuICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICByZXNwb25zaXZlOiBbe1xuICAgICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgY2VudGVyUGFkZGluZzogJzUwcHgnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDkwMCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgY2VudGVyUGFkZGluZzogJzAnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDUyMCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgY2VudGVyUGFkZGluZzogJzUwcHgnLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMVxuICAgICAgICAgICAgfVxuICAgICAgICB9XVxuXG4gICAgfSk7XG5cbiAgICAvL2Nsb2NrIGNvdW50ZXJcblxuICAgIHZhciBjbG9jaztcblxuICAgIHZhciBkYXRlID0gbmV3IERhdGUoMjAxNywgNiwgMTUpO1xuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciBkaWZmID0gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwIC0gbm93LmdldFRpbWUoKSAvIDEwMDA7XG5cbiAgICB2YXIgY2xvY2sgPSAkKCcuY2xvY2snKS5GbGlwQ2xvY2soZGlmZiwge1xuICAgICAgICBjbG9ja0ZhY2U6ICdEYWlseUNvdW50ZXInLFxuICAgICAgICBjb3VudGRvd246IHRydWVcbiAgICB9KTtcblxuICAgIC8vXHRcdFx0Y2xvY2sgPSAkKCcuY2xvY2snKS5GbGlwQ2xvY2soe1xuICAgIC8vXHRcdCAgICAgICAgY2xvY2tGYWNlOiAnRGFpbHlDb3VudGVyJyxcbiAgICAvL1x0XHQgICAgICAgIGF1dG9TdGFydDogZmFsc2UsXG4gICAgLy9cdFx0ICAgICAgICBjYWxsYmFja3M6IHtcbiAgICAvL1x0XHQgICAgICAgIFx0c3RvcDogZnVuY3Rpb24oKSB7XG4gICAgLy9cdFx0ICAgICAgICBcdFx0JCgnLm1lc3NhZ2UnKS5odG1sKCfQktGA0LXQvNGPINCw0LrRhtC40Lgg0LLRi9GI0LvQviAoJylcbiAgICAvL1x0XHQgICAgICAgIFx0fVxuICAgIC8vXHRcdCAgICAgICAgfVxuICAgIC8vXHRcdCAgICB9KTtcbiAgICAvL1x0XHRcdFx0ICAgIFxuICAgIC8vXHRcdCAgICBjbG9jay5zZXRUaW1lKDIwMDAwMCk7XG4gICAgLy9cdFx0ICAgIGNsb2NrLnNldENvdW50ZG93bih0cnVlKTtcbiAgICAvL1x0XHQgICAgY2xvY2suc3RhcnQoKTtcblxuICAgIC8vV09XIGluaXRcbiAgICBuZXcgV09XKCkuaW5pdCgpO1xuXG4gICAgLy8gc2xpZGUgYW5kIHN3aXBlIG1lbnUgaW5pdFxuICAgICQoJ25hdicpLnNsaWRlQW5kU3dpcGUoKTtcblxuICAgICQoXCIuc3NtLXRvZ2dsZS1uYXZcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwiYm9keV9PSFwiKTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleURvd25UZXh0RmllbGQsIGZhbHNlKTtcblxuICAgIGZ1bmN0aW9uIGtleURvd25UZXh0RmllbGQoZSkge1xuICAgICAgICB2YXIga2V5Q29kZSA9IGUua2V5Q29kZTtcbiAgICAgICAgaWYgKGtleUNvZGUgPT0gMjcpIHt9XG4gICAgfVxuXG4gICAgLy9Gb3JtIFZBbGlkYXRpb24gXG5cbiAgICAkKFwiI2pzX3JlZ2lzdGVyX2Zvcm1cIikudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgZm9ybV9uYW1lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JtX2VtYWlsOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JtX3Bob25lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbWlubGVuaHRoOiAxMCxcbiAgICAgICAgICAgICAgICBkaWdpdHM6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgIGZvcm1fbmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcItCe0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybV9lbWFpbDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcItCe0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtVwiLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBcItCS0LLQtdC00LjRgtC1INC60L7RgNGA0LXQutGC0L3Ri9C5IEVtYWlsXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JtX3Bob25lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwi0J7QsdGP0LfQsNGC0LXQu9GM0L3QvtC1INC/0L7Qu9C1XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZm9jdXNDbGVhbnVwOiB0cnVlLFxuICAgICAgICBmb2N1c0ludmFsaWQ6IGZhbHNlXG4gICAgfSk7XG4gICAgJChcIiNqc19yZWdpc3Rlcl9mb3JtMlwiKS52YWxpZGF0ZSh7XG4gICAgICAgIHJ1bGVzOiB7XG4gICAgICAgICAgICBmb3JtX25hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1fZW1haWw6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1fcGhvbmU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtaW5sZW5odGg6IDEwLFxuICAgICAgICAgICAgICAgIGRpZ2l0czogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgZm9ybV9uYW1lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwi0J7QsdGP0LfQsNGC0LXQu9GM0L3QvtC1INC/0L7Qu9C1XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JtX2VtYWlsOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwi0J7QsdGP0LfQsNGC0LXQu9GM0L3QvtC1INC/0L7Qu9C1XCIsXG4gICAgICAgICAgICAgICAgZW1haWw6IFwi0JLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGL0LkgRW1haWxcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1fcGhvbmU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogXCLQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmb2N1c0NsZWFudXA6IHRydWUsXG4gICAgICAgIGZvY3VzSW52YWxpZDogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vcGhvbmUgaW5wdXQgbWFza1xuICAgICQoXCIjZm9ybV9waG9uZVwiKS5tYXNrKFwiKDk5OSkgOTk5LTk5LTk5XCIpO1xuXG4gICAgLy8gICAgJChcIi5idXR0b24tY29sbGFwc2VcIikuc2lkZU5hdigpO1xuXG5cbiAgICAvLyBzZWN0aW9uI3N0YXJ0IG92ZXJsYXkgb3BhY2l0eSBieSBzY3JvbGxpbmcgXG4gICAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNzdGFydCA9ICQoXCIjc3RhcnRcIiksXG4gICAgICAgICAgICBvdmVybGF5ID0gJChcIi5vdmVybGF5XCIpLFxuICAgICAgICAgICAgb3ZlcmxheUlNRyA9ICQoXCIub3ZlcmxheV9pbWdcIiksXG4gICAgICAgICAgICBzaGVpZ2h0ID0gc3N0YXJ0LmhlaWdodCgpLFxuICAgICAgICAgICAgd2luU1QgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgIG92ZXJsYXkuY3NzKFwib3BhY2l0eVwiLCB3aW5TVCAvIHNoZWlnaHQpO1xuICAgICAgICBvdmVybGF5SU1HLmNzcyhcIm9wYWNpdHlcIiwgd2luU1QgLyBzaGVpZ2h0KTtcbiAgICB9KTtcblxuICAgIC8vIHJhbmRvbSBvdmVybGF5IGNvbG9yIGF0IHNlY3Rpb24jc3RhcnRcbiAgICB2YXIgYXJyQ29sb3JzID0gW1wiaW1nL2JnX3N0YXJ0X2JpZ19vdmVybGF5X3BhcmVuX29yYW5nZVAucG5nXCIsIFwiaW1nL2JnX3N0YXJ0X2JpZ19vdmVybGF5X3BhcmVuX29yYW5nZS5wbmdcIiwgXCJpbWcvYmdfc3RhcnRfYmlnX292ZXJsYXlfcGFyZW5fZGFya0JsdWUucG5nXCIsIFwiaW1nL2JnX3N0YXJ0X2JpZ19vdmVybGF5X3BhcmVuX2NvcmFsLnBuZ1wiLCBcImltZy9iZ19zdGFydF9iaWdfb3ZlcmxheV9wYXJlbl9ncmV5LnBuZ1wiXTtcblxuICAgIGZ1bmN0aW9uIHJhbmRvbUludGVnZXIobWluLCBtYXgpIHtcbiAgICAgICAgdmFyIHJhbmQgPSBtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCArIDEgLSBtaW4pO1xuICAgICAgICByYW5kID0gTWF0aC5mbG9vcihyYW5kKTtcbiAgICAgICAgcmV0dXJuIHJhbmQ7XG4gICAgfVxuICAgICQoXCIub3ZlcmxheV9pbWdcIikuYXR0cihcInNyY1wiLCBhcnJDb2xvcnNbcmFuZG9tSW50ZWdlcigwLCA0KV0pO1xuXG4gICAgLy8gaG92ZXIgZWZmZWN0IG9mIGJ1dHRvbiBpbiBzZWN0aW9uI3N0YXJ0IFxuICAgICQoXCIuZ2V0Q29uc1wiKS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3N0YXJ0IC5jb250YWluZXJyXCIpLmFkZENsYXNzKFwiaG92ZXJCdXR0b25cIik7XG4gICAgfSk7XG4gICAgJChcIi5nZXRDb25zXCIpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc3RhcnQgLmNvbnRhaW5lcnJcIikucmVtb3ZlQ2xhc3MoXCJob3ZlckJ1dHRvblwiKTtcbiAgICB9KTtcblxuICAgIC8vIGhlYWRlciBhcHBlYXJpbmcgYWZ0ZXIgc3RhcnQtc2VjdGlvbiBpcyBzY3JvbGxlZFxuICAgIC8qaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSArIDIwMCA+ICQoXCIjdW5kZXJTdGFydFwiKS5vZmZzZXQoKS50b3ApIHtcbiAgICAgICAgJChcImhlYWRlclwiKS5jc3MoXCJ0b3BcIiwgXCIwXCIpO1xuICAgIH1cbiAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJChcIiN1bmRlclN0YXJ0XCIpLm9mZnNldCgpLnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKSAtIDIwMCA8IDApIHtcbiAgICAgICAgICAgICQoXCJoZWFkZXJcIikuY3NzKFwidG9wXCIsIFwiMFwiKTtcbiAgICAgICAgICAgICQoXCJoZWFkZXIgbmF2XCIpLmNzcyhcInRvcFwiLCBcIjYwcHhcIik7XG4gICAgICAgICAgICAkKFwiIGhlYWRlciAuc3NtLW92ZXJsYXlcIikuY3NzKFwidG9wXCIsIFwiNjBweFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCJoZWFkZXJcIikuY3NzKFwidG9wXCIsIFwiXCIpO1xuICAgICAgICAgICAgJChcImhlYWRlciBuYXZcIikuY3NzKFwidG9wXCIsIFwiXCIpO1xuICAgICAgICAgICAgJChcIiBoZWFkZXIgLnNzbS1vdmVybGF5XCIpLmNzcyhcInRvcFwiLCBcIlwiKTtcbiAgICAgICAgfVxuICAgIH0pOyovXG5cbiAgICAvLyBwYXJhbGxheCBpbml0XG4gICAgJCgnLnBhcmFsbGF4JykucGFyYWxsYXgoKTtcblxuICAgIC8vYWRkIHByZWxvYWRlciBvZiBzY3JvbGxpbmdcbiAgICAkKFwiPGRpdiBpZD0nY29udFByZWxvYWRlcic+PGRpdiBpZD0nc2Nyb2xsUHJlbG9hZCc+PC9kaXY+PC9kaXY+XCIpLnByZXBlbmRUbygkKFwiYm9keVwiKSk7XG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYXRpbyA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIC8gKCgkKGRvY3VtZW50KS5oZWlnaHQoKSAtICQod2luZG93KS5oZWlnaHQoKSkgLyAxMDApO1xuICAgICAgICAkKFwiI3Njcm9sbFByZWxvYWRcIikud2lkdGgocmF0aW8gKyBcIiVcIik7XG4gICAgfSk7XG5cbiAgICAvLyBjaGFuZ2UgaGVhZGVyIHN0eWxlIGJ5IHNjcm9sbGluZyBcbiAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDc3KSB7XG4gICAgICAgICAgICAkKFwiaGVhZGVyIC5sb2dvXCIpLmNzcyhcIm1hcmdpblwiLCBcIjBweFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCJoZWFkZXIgLmxvZ29cIikuY3NzKFwibWFyZ2luXCIsIFwiXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBpbm5lciBhbmNob3ItbGlua3NcbiAgICAkKCdhW2RhdGEtdGFyZ2V0Xj1cImFuY2hvclwiXSwgW2RhdGEtdGFyZ2V0Xj1cImFuY2hvclwiXSAnKS5vbihcImNsaWNrLnNtb290aHNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpLFxuICAgICAgICAgICAgYmxfdG9wID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcCAtIDU2O1xuICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IGJsX3RvcFxuICAgICAgICB9LCA3MDApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBidXR0dG9uIFVQXG4gICAgLy8gYnV0dG9uIGFycm93IHRvIFVQXG5cbiAgICAkKFwiYm9keVwiKS5hcHBlbmQoXCI8YnV0dG9uIGNsYXNzPSdidG5fdXAnLz5cIik7XG5cbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbmRzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiA1MCkge1xuICAgICAgICAgICAgJChcIi5idG5fdXBcIikuYWRkQ2xhc3MoXCJhY3RpdmVCXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIi5idG5fdXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVCXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwiLmJ0bl91cFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZUJcIik7XG4gICAgICAgICQoXCJib2R5XCIpLmFuaW1hdGUoe1xuICAgICAgICAgICAgJ3Njcm9sbFRvcCc6IDBcbiAgICAgICAgfSwgODAwKTtcbiAgICAgICAgJChcImh0bWxcIikuYW5pbWF0ZSh7XG4gICAgICAgICAgICAnc2Nyb2xsVG9wJzogMFxuICAgICAgICB9LCA4MDApO1xuICAgIH0pO1xuXG4gICAgLy8gaGVpZ2h0bGl0ZSBuYXYgbGlua3MgYnkgc2Nyb2xsaW5nXG4gICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBuYXZpZ2F0aW9uQW5jaG9ycygxKTtcbiAgICAgICAgbmF2aWdhdGlvbkFuY2hvcnMoMik7XG4gICAgICAgIG5hdmlnYXRpb25BbmNob3JzKDMpO1xuICAgICAgICBuYXZpZ2F0aW9uQW5jaG9ycyg0KTtcbiAgICAgICAgbmF2aWdhdGlvbkFuY2hvcnMoNSk7XG4gICAgICAgIG5hdmlnYXRpb25BbmNob3JzKDcpO1xuICAgICAgICBuYXZpZ2F0aW9uQW5jaG9ycyg2KTtcbiAgICAgICAgbmF2aWdhdGlvbkFuY2hvcnMoNyk7XG5cbiAgICAgICAgZnVuY3Rpb24gbmF2aWdhdGlvbkFuY2hvcnMobikge1xuICAgICAgICAgICAgaWYgKCQoJ1tkYXRhLXBvcz1cXCdwb3MtJyArIG4gKyAnXFwnXScpLm9mZnNldCgpLnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKSAtIDMwMCA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoISQoJ1tkYXRhLXBvcz1cXCdwb3MtJyArIG4gKyAnXFwnXScpLm5leHQoKS5vZmZzZXQoKS50b3AgLSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgLSAzMDAgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tYWluLW5hdmlnYXRpb24gYS5saW5rLScgKyBuKS5wYXJlbnQoKS5zaWJsaW5ncygpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZU5hdkxpbmsnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGlyKCQoYC5uYXYgYS5saW5rLSR7bn1gKS5wYXJlbnQoKS5zaWJsaW5ncygpKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1haW4tbmF2aWdhdGlvbiBhLmxpbmstJyArIG4pLmFkZENsYXNzKCdhY3RpdmVOYXZMaW5rJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1haW4tbmF2aWdhdGlvbiBhLmxpbmstJyArIG4pLnJlbW92ZUNsYXNzKCdhY3RpdmVOYXZMaW5rJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcubWFpbi1uYXZpZ2F0aW9uIGEubGluay0nICsgbikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZU5hdkxpbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSk7Il19
